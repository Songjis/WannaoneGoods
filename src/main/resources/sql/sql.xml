<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sql">
   <select id="test" resultType="hashmap">
      select '테스트' as data
   </select>
   
  <!-- 인기상품 6개 가져올때 -->
  <select id="poplist" resultType="hashmap">
      select gimg from goods order by hit desc limit 6;
  </select>
   
   <!-- 신상품 3개 가져올때 -->
   <select id="newlist" resultType="hashmap">
      select gimg from goods order by date desc limit 3;
   </select>
   
  <!--  카테고리상품리스트가져올때 -->
  <select id="categorylist" resultType="hashmap" parameterType="hashmap">
      select * from goods
      where 1 = 1 
      <if test="type == 'living'">
      	and type in (11, 12)
      </if> 
      <if test="type == 'figure'">
      	and type = 21
      </if> 
      <if test="type == 'accesory'">
      	and type in (31, 32, 33)
      </if> 
      <if test="type == 'etc'">
      	and type = 51
      </if>
      <if test="type == 'clothes'">
      	and type = 41
      </if>
<!--     ORDER BY date  DESC limit #{start}, #{viewRow}; -->
   </select>
  
  
   
  <!-- 게시글 개수 구하기 -->
  <select id="totCnt" resultType="hashmap">
     select count(*) as tot from goods
  </select>
  
  <!-- 상품등록할때 -->
  <insert id="InsertNews" parameterType="hashmap">
      insert into goods(gimg, gname, gprice, gpick, content, type) values(#{gimg}, #{gname}, #{gprice},#{gpick},#{content}, #{type});
   </insert>
  
  
  <!-- 상품자세히볼때 -->
  <select id ="selectDetail" resultType ="hashmap">
 	select * from goods where  gno= #{gno};
	</select>
  
  <!-- 상품수정할때 -->
  <update id="updateNews" parameterType="hashmap">
      update goods set title=#{title}, contents=#{content}, days=#{days}, picName=#{picName}, picPath=#{picPath}, fileName=#{name}, filePath=#{path}  where no = #{no};
   </update>
  
</mapper>